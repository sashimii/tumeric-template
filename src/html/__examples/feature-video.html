<div class="container tumeric__component-padding">
  <div class="tumeric__video">
    <div class="tumeric__video-box embed-responsive embed-responsive-16by9">
      <video id="tumeric-video" class="embed-responsive-item" autoplay loop>

      </video>
    </div>
    <p class="tumeric__video-cta text-center"><a href="{{ cta_link }}">{{ call_to_action }}</a></p>
  </div>
</div>

<script>

  var tmFeaturedVideo = function() {
    var video = $('#tumeric-video');

    var windowWidth = $(window).width();

    var imageIfRetina = function(image, breakpoint) {
      var isRetina = function() {
        var minPixelRatio = 1.3;
        return minPixelRatio < window.devicePixelRatio;
      }
      
      if(image === '') {
        if(isRetina()) {
          return image + '_' + breakpoint + '_@2x' + '.jpg';
        } else {
          return image + '_' + breakpoint + '.jpg';
        }
      } else {
        return null;
      }

    }


    if (windowWidth <= 425) {
      // Mobile
      video.attr('poster', imageIfRetina('{{ video_still_url }}', 'b3'));
      video.append("<source src='{{ video_url_mobile }}' type='video/mp4' >");
    } else if (windowWidth > 425 && windowWidth < 1024 ) {
      // Tablets
      video.attr('poster', imageIfRetina('{{ video_still_url }}', 'b2'));
      video.append("<source src='{{ video_url_tablet }}' type='video/mp4' >");
    } else {
      // Desktop
      video.attr('poster', imageIfRetina('{{ video_still_url }}', 'b1'));
      video.append("<source src='{{ video_url_desktop }}' type='video/mp4' >");
    }
  }
  tmFeaturedVideo();


</script>
